import React from 'react'
import { api as axios } from '../lib/api'
export default function Admin(){const [email,setEmail]=React.useState('admin@xtreme.local');const [password,setPassword]=React.useState('admin123');const [token,setToken]=React.useState(null);const [products,setProducts]=React.useState([]);const login=async()=>{const {data}=await axios.post('/api/auth/login',{email,password});setToken(data.token)};const load=async()=>{const {data}=await axios.get('/api/products');setProducts(data)};React.useEffect(()=>{if(token)load()},[token]);if(!token)return(<div className='min-h-screen grid place-items-center'><div className='card p-6 w-[420px]'><h1 className='text-xl font-bold mb-3'>Admin Login</h1><input className='border rounded-xl px-3 py-2 w-full mb-2' value={email} onChange={e=>setEmail(e.target.value)}/><input className='border rounded-xl px-3 py-2 w-full mb-3' type='password' value={password} onChange={e=>setPassword(e.target.value)}/><button className='btn btn-primary w-full' onClick={login}>Login</button><a className='text-xs text-zinc-600 block mt-3 text-center' href='#home'>← Back to site</a></div></div>);return(<div className='max-w-5xl mx-auto px-4 py-10'><h1 className='text-2xl font-bold'>Admin</h1><div className='grid md:grid-cols-2 gap-4'>{products.map(p=>(<div key={p.id} className='card p-4'><div className='font-semibold'>{p.name}</div><ul className='text-sm mt-2'>{p.variants.map(v=><li key={v.id}>{v.name} — ₹{v.price}</li>)}</ul></div>))}</div><a className='text-xs text-zinc-600 block mt-6' href='#home'>← Back to site</a></div>)}
